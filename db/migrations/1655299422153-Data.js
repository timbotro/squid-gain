module.exports = class Data1655299422153 {
  name = 'Data1655299422153'

  async up(db) {
    await db.query(`CREATE TABLE "historical_balance" ("id" character varying NOT NULL, "balance" numeric NOT NULL, "date" TIMESTAMP WITH TIME ZONE NOT NULL, "account_id" character varying NOT NULL, CONSTRAINT "PK_74ac29ad0bdffb6d1281a1e17e8" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_383ff006e4b59db91d32cb891e" ON "historical_balance" ("account_id") `)
    await db.query(`CREATE TABLE "account" ("id" character varying NOT NULL, "balance" numeric NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`)
    await db.query(`CREATE TABLE "curr_volume_day" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE, "volume_day_native" numeric, "volume_day_usd" numeric, "currency_id" character varying, CONSTRAINT "PK_8ec9c8475cb43665ae52199e606" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_93ac589e3c87a5c6510a690dd2" ON "curr_volume_day" ("currency_id") `)
    await db.query(`CREATE TABLE "curr_liquidity" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE, "liquidity" numeric, "liquidity_usd" numeric, "currency_id" character varying, CONSTRAINT "PK_c80cc5b8686e0894e99e6edad77" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_e17ad5c686feb6cd4e4840ce48" ON "curr_liquidity" ("currency_id") `)
    await db.query(`CREATE TABLE "curr_price" ("id" character varying NOT NULL, "usd_price" numeric, "timestamp" TIMESTAMP WITH TIME ZONE, "currency_id" character varying, CONSTRAINT "PK_b53f40555618333760c322f4686" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_48a6a61594cc62fc3e5e54bd48" ON "curr_price" ("currency_id") `)
    await db.query(`CREATE TABLE "currency" ("id" character varying NOT NULL, "currency_name" text NOT NULL, "decimals" integer, CONSTRAINT "PK_3cda65c731a6264f0e444cc9b91" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_5a33a125ed9f56b401415f6199" ON "currency" ("currency_name") `)
    await db.query(`CREATE TABLE "swap" ("id" character varying NOT NULL, "timestamp" numeric, "from_amount" numeric, "to_amount" numeric, "from_currency_id" character varying, "to_currency_id" character varying, CONSTRAINT "PK_4a10d0f359339acef77e7f986d9" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_5a104bbdfe48a94a9fd2b81990" ON "swap" ("from_currency_id") `)
    await db.query(`CREATE INDEX "IDX_3b0a35a16b356bc35c147cfe4e" ON "swap" ("to_currency_id") `)
    await db.query(`CREATE TABLE "liquidity_change" ("id" character varying NOT NULL, "timestamp" numeric NOT NULL, "block_number" integer NOT NULL, "event_idx" integer NOT NULL, "step" integer NOT NULL, "reason" character varying(6) NOT NULL, "currency_zero" text NOT NULL, "currency_one" text NOT NULL, "amount_zero" numeric NOT NULL, "amount_one" numeric NOT NULL, "balance_zero" numeric NOT NULL, "balance_one" numeric NOT NULL, CONSTRAINT "PK_470573b79a4d135580c7e7c8179" PRIMARY KEY ("id"))`)
    await db.query(`CREATE TABLE "pool_volume_day" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE, "volume_day_usd" numeric, "pool_id" character varying, CONSTRAINT "PK_5d77fbdac354859655b14e818ae" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_4f065e19318d1e86b6699fdb4b" ON "pool_volume_day" ("pool_id") `)
    await db.query(`CREATE TABLE "pool_liquidity" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE, "token0_liquidity" numeric, "token1_liquidity" numeric, "usd_total_liquidity" numeric, "pool_id" character varying, CONSTRAINT "PK_cb62efc910a2325642f4de1b7b4" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_09772a4143d40063de22a1d556" ON "pool_liquidity" ("pool_id") `)
    await db.query(`CREATE TABLE "pool" ("id" character varying NOT NULL, "currency0" text NOT NULL, "currency1" text NOT NULL, CONSTRAINT "PK_db1bfe411e1516c01120b85f8fe" PRIMARY KEY ("id"))`)
    await db.query(`CREATE TABLE "overview_history" ("id" character varying NOT NULL, "total_liquidity" numeric, "total_volume_day" numeric, "timestamp" TIMESTAMP WITH TIME ZONE, CONSTRAINT "PK_89dd196df1321e3039cdaa8fdd4" PRIMARY KEY ("id"))`)
    await db.query(`ALTER TABLE "historical_balance" ADD CONSTRAINT "FK_383ff006e4b59db91d32cb891e9" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "curr_volume_day" ADD CONSTRAINT "FK_93ac589e3c87a5c6510a690dd23" FOREIGN KEY ("currency_id") REFERENCES "currency"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "curr_liquidity" ADD CONSTRAINT "FK_e17ad5c686feb6cd4e4840ce48e" FOREIGN KEY ("currency_id") REFERENCES "currency"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "curr_price" ADD CONSTRAINT "FK_48a6a61594cc62fc3e5e54bd48d" FOREIGN KEY ("currency_id") REFERENCES "currency"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "swap" ADD CONSTRAINT "FK_5a104bbdfe48a94a9fd2b81990a" FOREIGN KEY ("from_currency_id") REFERENCES "currency"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "swap" ADD CONSTRAINT "FK_3b0a35a16b356bc35c147cfe4eb" FOREIGN KEY ("to_currency_id") REFERENCES "currency"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "pool_volume_day" ADD CONSTRAINT "FK_4f065e19318d1e86b6699fdb4bd" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "pool_liquidity" ADD CONSTRAINT "FK_09772a4143d40063de22a1d556e" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
  }

  async down(db) {
    await db.query(`DROP TABLE "historical_balance"`)
    await db.query(`DROP INDEX "public"."IDX_383ff006e4b59db91d32cb891e"`)
    await db.query(`DROP TABLE "account"`)
    await db.query(`DROP TABLE "curr_volume_day"`)
    await db.query(`DROP INDEX "public"."IDX_93ac589e3c87a5c6510a690dd2"`)
    await db.query(`DROP TABLE "curr_liquidity"`)
    await db.query(`DROP INDEX "public"."IDX_e17ad5c686feb6cd4e4840ce48"`)
    await db.query(`DROP TABLE "curr_price"`)
    await db.query(`DROP INDEX "public"."IDX_48a6a61594cc62fc3e5e54bd48"`)
    await db.query(`DROP TABLE "currency"`)
    await db.query(`DROP INDEX "public"."IDX_5a33a125ed9f56b401415f6199"`)
    await db.query(`DROP TABLE "swap"`)
    await db.query(`DROP INDEX "public"."IDX_5a104bbdfe48a94a9fd2b81990"`)
    await db.query(`DROP INDEX "public"."IDX_3b0a35a16b356bc35c147cfe4e"`)
    await db.query(`DROP TABLE "liquidity_change"`)
    await db.query(`DROP TABLE "pool_volume_day"`)
    await db.query(`DROP INDEX "public"."IDX_4f065e19318d1e86b6699fdb4b"`)
    await db.query(`DROP TABLE "pool_liquidity"`)
    await db.query(`DROP INDEX "public"."IDX_09772a4143d40063de22a1d556"`)
    await db.query(`DROP TABLE "pool"`)
    await db.query(`DROP TABLE "overview_history"`)
    await db.query(`ALTER TABLE "historical_balance" DROP CONSTRAINT "FK_383ff006e4b59db91d32cb891e9"`)
    await db.query(`ALTER TABLE "curr_volume_day" DROP CONSTRAINT "FK_93ac589e3c87a5c6510a690dd23"`)
    await db.query(`ALTER TABLE "curr_liquidity" DROP CONSTRAINT "FK_e17ad5c686feb6cd4e4840ce48e"`)
    await db.query(`ALTER TABLE "curr_price" DROP CONSTRAINT "FK_48a6a61594cc62fc3e5e54bd48d"`)
    await db.query(`ALTER TABLE "swap" DROP CONSTRAINT "FK_5a104bbdfe48a94a9fd2b81990a"`)
    await db.query(`ALTER TABLE "swap" DROP CONSTRAINT "FK_3b0a35a16b356bc35c147cfe4eb"`)
    await db.query(`ALTER TABLE "pool_volume_day" DROP CONSTRAINT "FK_4f065e19318d1e86b6699fdb4bd"`)
    await db.query(`ALTER TABLE "pool_liquidity" DROP CONSTRAINT "FK_09772a4143d40063de22a1d556e"`)
  }
}
